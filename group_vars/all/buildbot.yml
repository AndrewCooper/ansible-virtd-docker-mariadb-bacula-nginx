---
buildbot_version: '2.4.0'
buildbot_worker_port: '9989'
buildbot_worker_ntel: worker-ntel
buildbot_worker_ptxdist: worker-ptxdist

buildbot_master_connection_string: "\
  ssl\
  :port={{ buildbot_worker_port }}\
  :sslmethod=TLSv1_2_METHOD\
  :certKey=/etc/ssl/private/server.pem\
  :privateKey=/etc/ssl/private/server.key\
  :extraCertChain=/etc/ssl/private/ca.pem\
  :dhParameters=/etc/ssl/private/dhparam.pem"

buildbot_worker_connection_string: "\
  tls\
  :host={{ buildbot_hostname }}\
  :port={{ buildbot_worker_port }}\
  :certificate=/etc/ssl/private/client.pem\
  :privateKey=/etc/ssl/private/client.key\
  :trustRoots=/etc/ssl/private"

buildbot_creds: '{{ playbook_dir + "/credentials/buildbot" }}'
buildbot_ca_csr: '{{ buildbot_creds + "/ssl/ca.csr" }}'
buildbot_ca_key: '{{ buildbot_creds + "/ssl/ca.key" }}'
buildbot_ca_pem: '{{ buildbot_creds + "/ssl/ca.pem" }}'

buildbot_email_password: '{{ lookup("password", buildbot_creds + "/buildbot@novatech-llc.com length=20 chars=ascii_letters,digits") }}'

buildbot_master_dhparam: '{{ buildbot_creds + "/master/dhparam.pem" }}'
buildbot_master_sshkey: '{{ buildbot_creds + "/master/id_rsa" }}'
buildbot_master_tlscsr: '{{ buildbot_creds + "/master/server.csr" }}'
buildbot_master_tlskey: '{{ buildbot_creds + "/master/server.key" }}'
buildbot_master_tlspem: '{{ buildbot_creds + "/master/server.pem" }}'

buildbot_worker_ntel_passwd: '{{ lookup("password", buildbot_creds + "/worker_ntel/passwd length=20") }}'
buildbot_worker_ntel_sshkey: '{{ buildbot_creds + "/worker_ntel/id_rsa" }}'
buildbot_worker_ntel_tlscsr: '{{ buildbot_creds + "/worker_ntel/client.csr" }}'
buildbot_worker_ntel_tlskey: '{{ buildbot_creds + "/worker_ntel/client.key" }}'
buildbot_worker_ntel_tlspem: '{{ buildbot_creds + "/worker_ntel/client.pem" }}'

buildbot_worker_ptxdist_passwd: '{{ lookup("password", buildbot_creds + "/worker_ptxdist/passwd length=20") }}'
buildbot_worker_ptxdist_sshkey: '{{ buildbot_creds + "/worker_ptxdist/id_rsa" }}'
buildbot_worker_ptxdist_tlscsr: '{{ buildbot_creds + "/worker_ptxdist/client.csr" }}'
buildbot_worker_ptxdist_tlskey: '{{ buildbot_creds + "/worker_ptxdist/client.key" }}'
buildbot_worker_ptxdist_tlspem: '{{ buildbot_creds + "/worker_ptxdist/client.pem" }}'

buildbot_webhook_secret: '{{ lookup("password", buildbot_creds + "/webhook length=20") }}'
